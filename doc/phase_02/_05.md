# Phase 02-5: ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ í†µí•© ì„¤ê³„

## 1. í˜„ì¬ êµ¬ì¡°ì˜ ë¬¸ì œì 

### 1.1 ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ê°€ ë¶„ì‚°ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í˜„ì¬: ë¶„ì‚°ëœ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

app.py
â”œâ”€â”€ st.session_state.messages      â† ëŒ€í™” íˆìŠ¤í† ë¦¬ (ë©”ëª¨ë¦¬)
â”œâ”€â”€ st.session_state.summary       â† ìš”ì•½ë³¸ (ë©”ëª¨ë¦¬)
â”œâ”€â”€ st.session_state.summary_history â† ìš”ì•½ íˆìŠ¤í† ë¦¬ (ë©”ëª¨ë¦¬)
â”œâ”€â”€ st.session_state.chunks        â† PDF ì²­í¬ (ë©”ëª¨ë¦¬)
â””â”€â”€ st.session_state.pdf_description â† PDF ì„¤ëª… (ë©”ëª¨ë¦¬)

repository/
â”œâ”€â”€ ConversationRepository         â† ëŒ€í™” íˆìŠ¤í† ë¦¬ (JSON íŒŒì¼)
â”œâ”€â”€ SessionRepository              â† ì„¸ì…˜ ë©”íƒ€ë°ì´í„° (JSON íŒŒì¼)
â””â”€â”€ EmbeddingRepository            â† PDF ì„ë² ë”© (Pickle íŒŒì¼)

service/react_graph.py
â””â”€â”€ MemorySaver                    â† ê·¸ë˜í”„ ìƒíƒœ (ë©”ëª¨ë¦¬, íœ˜ë°œì„±)
```

### 1.2 ë¬¸ì œì 

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **ì¤‘ë³µ ì €ì¥** | ê°™ì€ ë°ì´í„°ê°€ ì—¬ëŸ¬ ê³³ì— ì €ì¥ë¨ |
| **ì¼ê´€ì„± ìœ„í—˜** | ì €ì¥ì†Œ ê°„ ë™ê¸°í™” í•„ìš” |
| **íœ˜ë°œì„±** | MemorySaverëŠ” ì•± ì¬ì‹œì‘ ì‹œ ì†Œì‹¤ |
| **ìš”ì•½ ë¶„ë¦¬** | ìš”ì•½ ë¡œì§ì´ ê·¸ë˜í”„ ì™¸ë¶€(app.py)ì— ìˆìŒ |
| **ë³µì¡í•œ ì½”ë“œ** | ì—¬ëŸ¬ Repository í´ë˜ìŠ¤ ê´€ë¦¬ í•„ìš” |

---

## 2. ìƒˆë¡œìš´ êµ¬ì¡°: SqliteSaver + í†µí•© State

### 2.1 ëª©í‘œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ëª©í‘œ: í†µí•©ëœ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

data/
â””â”€â”€ langgraph.db                   â† SQLite íŒŒì¼ í•˜ë‚˜ë¡œ í†µí•©

ReactGraphBuilder
â”œâ”€â”€ SqliteSaver("data/langgraph.db")
â””â”€â”€ ChatState (ëª¨ë“  ì»¨í…ìŠ¤íŠ¸ í¬í•¨)
    â”œâ”€â”€ messages                   â† ëŒ€í™” íˆìŠ¤í† ë¦¬
    â”œâ”€â”€ summary                    â† ìš”ì•½ë³¸
    â”œâ”€â”€ summary_history            â† ìš”ì•½ íˆìŠ¤í† ë¦¬
    â”œâ”€â”€ pdf_description            â† PDF ì„¤ëª…
    â”œâ”€â”€ tool_results               â† íˆ´ ê²°ê³¼
    â””â”€â”€ ...

ì¥ì :
âœ… ë‹¨ì¼ ì €ì¥ì†Œë¡œ í†µí•©
âœ… ì•± ì¬ì‹œì‘í•´ë„ ëŒ€í™” ì´ì–´ê°€ê¸°
âœ… LangGraphê°€ ëª¨ë“  ìƒíƒœ ê´€ë¦¬
âœ… ìš”ì•½ ë…¸ë“œë„ ê·¸ë˜í”„ ë‚´ë¶€ì—
```

### 2.2 SqliteSaver vs MemorySaver

| í•­ëª© | MemorySaver (í˜„ì¬) | SqliteSaver (ë³€ê²½) |
|------|-------------------|-------------------|
| ì €ì¥ ìœ„ì¹˜ | ë©”ëª¨ë¦¬ | SQLite íŒŒì¼ |
| ì˜êµ¬ì„± | âŒ íœ˜ë°œì„± | âœ… ì˜êµ¬ ì €ì¥ |
| ì•± ì¬ì‹œì‘ | ëŒ€í™” ì†Œì‹¤ | ëŒ€í™” ìœ ì§€ |
| ì„±ëŠ¥ | ë¹ ë¦„ | ì•½ê°„ ëŠë¦¼ (I/O) |
| ì„¸ì…˜ ê´€ë¦¬ | thread_id | thread_id |
| ë™ì‹œì„± | ì œí•œì  | ì§€ì› |

---

## 3. ìš”ì•½ ë¡œì§ ë¶„ì„

### 3.1 í˜„ì¬ ìš”ì•½ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í˜„ì¬: ìš”ì•½ì´ ê·¸ë˜í”„ ì™¸ë¶€                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

app.py handle_chat_message()
â”‚
â”œâ”€â”€ 1. turn_count ê³„ì‚°
â”‚
â”œâ”€â”€ 2. SummaryService.should_summarize(turn_count)
â”‚      â””â”€â”€ turn_count >= 4 ì´ê³  (turn_count - 1) % 3 == 0 ì´ë©´ True
â”‚
â”œâ”€â”€ 3. ìš”ì•½ í•„ìš”ì‹œ:
â”‚      â”œâ”€â”€ get_turns_to_summarize() â†’ (to_summarize, to_keep)
â”‚      â”œâ”€â”€ build_summary_prompt() â†’ í”„ë¡¬í”„íŠ¸ ìƒì„±
â”‚      â””â”€â”€ LLMService.generate() â†’ ìš”ì•½ ìƒì„±
â”‚
â”œâ”€â”€ 4. ReactGraphBuilder.invoke() â† ê·¸ë˜í”„ ì‹¤í–‰ (ìš”ì•½ ì´í›„)
â”‚
â””â”€â”€ 5. ì‘ë‹µ ì €ì¥
```

### 3.2 ìš”ì•½ íŠ¸ë¦¬ê±° ì¡°ê±´

```python
def should_summarize(turn_count: int) -> bool:
    """
    Turn 4, 7, 10, 13, ... ì—ì„œ ìš”ì•½ íŠ¸ë¦¬ê±°

    Turn 4: 1,2,3 ìš”ì•½ â†’ [ìš”ì•½] + [4]
    Turn 7: 4,5,6 ìš”ì•½ â†’ [ìš”ì•½] + [7]
    Turn 10: 7,8,9 ìš”ì•½ â†’ [ìš”ì•½] + [10]
    """
    if turn_count < 4:
        return False
    return (turn_count - 1) % 3 == 0
```

### 3.3 ìš”ì•½ ì‹œ ë©”ì‹œì§€ ë¶„í• 

```
Turn 7ì—ì„œ ìš”ì•½ íŠ¸ë¦¬ê±° ì‹œ:

ì „ì²´ ë©”ì‹œì§€: [1, 2, 3, 4, 5, 6, 7]
                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚
    to_summarize              to_keep
    [4, 5, 6]                 [7]
         â”‚                         â”‚
         â–¼                         â”‚
    LLM ìš”ì•½ ìƒì„±                  â”‚
    "Turn 4-6 ìš”ì•½ë³¸"              â”‚
         â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    LLMì— ì „ë‹¬: [ê¸°ì¡´ìš”ì•½ + ìƒˆìš”ì•½] + [7ë²ˆ ë©”ì‹œì§€]
```

---

## 4. ìƒˆë¡œìš´ ê·¸ë˜í”„ ì„¤ê³„

### 4.1 ìš”ì•½ ë…¸ë“œ í¬í•¨ ê·¸ë˜í”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìƒˆë¡œìš´ ê·¸ë˜í”„: ìš”ì•½ ë…¸ë“œ í¬í•¨                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         START
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Summary Node   â”‚ â—„â”€â”€ summary_check.py (ìƒˆ í”„ë¡¬í”„íŠ¸)
                  â”‚  (ìš”ì•½ ì²´í¬ &   â”‚     "ìš”ì•½ í•„ìš” ì—¬ë¶€ íŒë‹¨"
                  â”‚   í•„ìš”ì‹œ ìƒì„±)  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Tool Selector  â”‚ â—„â”€â”€ tool_selector.py
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚            â”‚            â”‚            â”‚
              â–¼            â–¼            â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Time  â”‚  â”‚  RAG   â”‚  â”‚ Search â”‚  â”‚Reasoningâ”‚
         â”‚  Tool  â”‚  â”‚  Tool  â”‚  â”‚  Tool  â”‚  â”‚  Tool  â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
              â”‚            â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Result Processorâ”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                             â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                             â”‚             â”‚
                          ë” í•„ìš”        ì¶©ë¶„
                             â”‚             â”‚
                             â”‚             â–¼
                             â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚    â”‚Response Generatorâ”‚
                             â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚             â”‚
                             â”‚             â–¼
                             â”‚           END
                             â”‚
                             â””â”€â”€â–º Tool Selector (ë£¨í”„)
```

### 4.2 Summary Node ë™ì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Summary Node ë™ì‘                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Summary Node
â”‚
â”œâ”€â”€ 1. turn_count ê³„ì‚° (messagesì—ì„œ)
â”‚
â”œâ”€â”€ 2. should_summarize(turn_count) ì²´í¬
â”‚
â”œâ”€â”€ 3-A. ìš”ì•½ ë¶ˆí•„ìš”:
â”‚        â””â”€â”€ ê·¸ëŒ€ë¡œ ë‹¤ìŒ ë…¸ë“œë¡œ
â”‚
â””â”€â”€ 3-B. ìš”ì•½ í•„ìš”:
         â”œâ”€â”€ ì´ì „ ë©”ì‹œì§€ ë¶„í•  (to_summarize, to_keep)
         â”œâ”€â”€ LLMìœ¼ë¡œ ìš”ì•½ ìƒì„±
         â”œâ”€â”€ state["summary"] ì—…ë°ì´íŠ¸
         â”œâ”€â”€ state["summary_history"] ì—…ë°ì´íŠ¸
         â””â”€â”€ state["messages_for_context"] = [ìš”ì•½ + to_keep]
```

---

## 5. ìƒˆë¡œìš´ ChatState ì„¤ê³„

```python
from typing import TypedDict, Annotated
from langchain_core.messages import BaseMessage
import operator


class ChatState(TypedDict):
    """Phase 02-5: í†µí•© ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ State"""

    # === ì…ë ¥ ===
    user_input: str
    session_id: str

    # === ëŒ€í™” íˆìŠ¤í† ë¦¬ (SqliteSaverê°€ ì˜êµ¬ ì €ì¥) ===
    messages: Annotated[list[BaseMessage], operator.add]  # ëˆ„ì  ì €ì¥
    turn_count: int

    # === ìš”ì•½ (Summary Nodeê°€ ê´€ë¦¬) ===
    summary: str                      # í˜„ì¬ ìš”ì•½ë³¸
    summary_history: list[dict]       # ìš”ì•½ íˆìŠ¤í† ë¦¬
    messages_for_context: list[BaseMessage]  # LLMì— ì „ë‹¬í•  ë©”ì‹œì§€ (ìš”ì•½ ì ìš© í›„)

    # === PDF ì»¨í…ìŠ¤íŠ¸ ===
    pdf_description: str
    pdf_chunks_exist: bool

    # === ReAct ë£¨í”„ ìƒíƒœ ===
    current_tool: str
    tool_history: list[str]
    iteration: int
    max_iterations: int

    # === íˆ´ ê²°ê³¼ ===
    tool_results: dict[str, str]

    # === í”„ë¡œì„¸ì„œ íŒë‹¨ ===
    needs_more_tools: bool
    processor_summary: str

    # === ìµœì¢… ì¶œë ¥ ===
    final_response: str

    # === ë©”íƒ€ë°ì´í„° ===
    input_tokens: int
    output_tokens: int
    model_used: str
```

---

## 6. í”„ë¡¬í”„íŠ¸ ì¶”ê°€

### 6.1 ìƒˆë¡œìš´ í”„ë¡¬í”„íŠ¸ êµ¬ì¡°

```
prompt/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ selector/
â”‚   â””â”€â”€ tool_selector.py
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ reasoning.py
â”œâ”€â”€ processor/
â”‚   â””â”€â”€ result_processor.py
â”œâ”€â”€ response/
â”‚   â””â”€â”€ response_generator.py
â””â”€â”€ summary/                         â† ìƒˆë¡œ ì¶”ê°€
    â”œâ”€â”€ __init__.py
    â””â”€â”€ summary_generator.py         â† ìš”ì•½ ìƒì„± í”„ë¡¬í”„íŠ¸
```

### 6.2 summary_generator.py

```python
"""Phase 02-5: ìš”ì•½ ìƒì„± í”„ë¡¬í”„íŠ¸"""

SUMMARY_GENERATOR_PROMPT = """
ë‹¤ìŒ ëŒ€í™” ë‚´ìš©ì„ ê°„ê²°í•˜ê²Œ ìš”ì•½í•˜ì„¸ìš”.

## ìš”ì•½ ê·œì¹™
1. í•µì‹¬ ì •ë³´, ì‚¬ìš©ìì˜ ìš”ì²­ ì‚¬í•­, ì¤‘ìš”í•œ ê²°ì • ì‚¬í•­ì„ í¬í•¨
2. 200ì ì´ë‚´ë¡œ ì‘ì„±
3. ê°ê´€ì ì¸ ì–´ì¡°ë¡œ ì‘ì„±

## ì´ì „ ìš”ì•½ (ìˆëŠ” ê²½ìš°)
{previous_summary}

## ì¶”ê°€í•  ëŒ€í™”
{conversation}

## í†µí•© ìš”ì•½
""".strip()


def get_prompt(
    previous_summary: str,
    conversation: str,
) -> str:
    """ìš”ì•½ ìƒì„± í”„ë¡¬í”„íŠ¸"""
    return SUMMARY_GENERATOR_PROMPT.format(
        previous_summary=previous_summary if previous_summary else "ì—†ìŒ",
        conversation=conversation,
    )
```

---

## 7. êµ¬í˜„ ê³„íš

### 7.1 íŒŒì¼ ë³€ê²½ ìƒì„¸

#### ğŸ†• ì¶”ê°€ë˜ëŠ” íŒŒì¼

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `prompt/summary/__init__.py` | ìš”ì•½ í”„ë¡¬í”„íŠ¸ íŒ¨í‚¤ì§€ ì´ˆê¸°í™” |
| `prompt/summary/summary_generator.py` | ìš”ì•½ ìƒì„± í”„ë¡¬í”„íŠ¸ (get_prompt í•¨ìˆ˜) |

#### ğŸ”§ ìˆ˜ì •ë˜ëŠ” íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `service/react_graph.py` | MemorySaver â†’ SqliteSaver, ChatState í™•ì¥, Summary Node ì¶”ê°€, ê·¸ë˜í”„ ì¬êµ¬ì„± (START â†’ Summary â†’ Tool Selector) |
| `app.py` | ìš”ì•½ ë¡œì§ ì œê±° (handle_chat_messageì—ì„œ SummaryService í˜¸ì¶œ ì‚­ì œ), ì„¸ì…˜ ë³µì› ë¡œì§ ë‹¨ìˆœí™” |
| `tests/test_prompts.py` | ìš”ì•½ í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| `tests/test_react_graph.py` | Summary Node ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, SqliteSaver ë™ì‘ í…ŒìŠ¤íŠ¸, ì„¸ì…˜ ì˜ì†ì„± í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| `tests/test_integration.py` | ì„¸ì…˜ ë³µì› í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| `pyproject.toml` | `langgraph-checkpoint-sqlite` ì˜ì¡´ì„± ì¶”ê°€ |

#### ğŸ—‘ï¸ ë¶ˆí•„ìš”í•´ì§€ëŠ” íŒŒì¼

| íŒŒì¼ | ì´ìœ  | ì¡°ì¹˜ |
|------|------|------|
| `service/summary_service.py` | ìš”ì•½ ë¡œì§ì´ ê·¸ë˜í”„ ë‚´ë¶€ Summary Nodeë¡œ ì´ë™ | ì‚­ì œ |
| `repository/conversation_repo.py` | SqliteSaverê°€ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥ ë‹´ë‹¹ | ì‚­ì œ ë˜ëŠ” PDF ì „ìš©ìœ¼ë¡œ ì¶•ì†Œ |
| `repository/session_repo.py` | SqliteSaverê°€ ì„¸ì…˜ ìƒíƒœ ì €ì¥ ë‹´ë‹¹ | ì‚­ì œ ë˜ëŠ” PDF ì „ìš©ìœ¼ë¡œ ì¶•ì†Œ |
| `prompt/agent.txt` | Phase 02-4ì—ì„œ ì´ë¯¸ .py ëª¨ë“ˆë¡œ ëŒ€ì²´ë¨ | ì‚­ì œ |

> **ì°¸ê³ **: `repository/embedding_repo.py`ì™€ `repository/pdf_extractor.py`ëŠ” PDF ì²˜ë¦¬ ì „ìš©ì´ë¯€ë¡œ ìœ ì§€

### 7.2 êµ¬í˜„ ìˆœì„œ ë° TDD ê³„íš

```
Phase 02-5 êµ¬í˜„ ìˆœì„œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Step 1] ì˜ì¡´ì„± ì¶”ê°€
â”œâ”€â”€ pyproject.tomlì— langgraph-checkpoint-sqlite ì¶”ê°€
â””â”€â”€ uv syncë¡œ ì„¤ì¹˜ í™•ì¸

[Step 2] ìš”ì•½ í”„ë¡¬í”„íŠ¸ ìƒì„± (TDD)
â”œâ”€â”€ tests/test_prompts.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_summary_prompt_basic
â”‚   â”œâ”€â”€ test_summary_prompt_with_previous_summary
â”‚   â””â”€â”€ test_summary_prompt_format
â”œâ”€â”€ prompt/summary/__init__.py ìƒì„±
â””â”€â”€ prompt/summary/summary_generator.py êµ¬í˜„

[Step 3] ChatState í™•ì¥ (TDD)
â”œâ”€â”€ tests/test_react_graph.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_chat_state_has_summary_fields
â”‚   â””â”€â”€ test_chat_state_has_turn_count
â””â”€â”€ service/react_graph.pyì˜ ChatState ìˆ˜ì •

[Step 4] SqliteSaver ì ìš© (TDD)
â”œâ”€â”€ tests/test_react_graph.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_sqlite_saver_initialization
â”‚   â”œâ”€â”€ test_state_persistence_across_invocations
â”‚   â””â”€â”€ test_session_isolation
â””â”€â”€ service/react_graph.pyì—ì„œ MemorySaver â†’ SqliteSaver

[Step 5] Summary Node êµ¬í˜„ (TDD)
â”œâ”€â”€ tests/test_react_graph.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_summary_node_no_summarize_needed
â”‚   â”œâ”€â”€ test_summary_node_summarize_at_turn_4
â”‚   â”œâ”€â”€ test_summary_node_summarize_at_turn_7
â”‚   â””â”€â”€ test_summary_node_updates_state
â””â”€â”€ service/react_graph.pyì— _summary_node() ì¶”ê°€

[Step 6] ê·¸ë˜í”„ ì¬êµ¬ì„± (TDD)
â”œâ”€â”€ tests/test_react_graph.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_graph_starts_with_summary_node
â”‚   â””â”€â”€ test_summary_then_tool_selector_flow
â””â”€â”€ service/react_graph.pyì˜ build() ìˆ˜ì •
    â””â”€â”€ START â†’ summary_node â†’ tool_selector â†’ ...

[Step 7] app.py ë‹¨ìˆœí™”
â”œâ”€â”€ handle_chat_message()ì—ì„œ SummaryService í˜¸ì¶œ ì œê±°
â”œâ”€â”€ save_current_session() ë‹¨ìˆœí™” (SqliteSaver ì‚¬ìš©)
â”œâ”€â”€ load_session_data() ë‹¨ìˆœí™” (SqliteSaver ì‚¬ìš©)
â””â”€â”€ st.session_state ì˜ì¡´ì„± ì¶•ì†Œ

[Step 8] í†µí•© í…ŒìŠ¤íŠ¸
â”œâ”€â”€ tests/test_integration.pyì— í…ŒìŠ¤íŠ¸ ì¶”ê°€
â”‚   â”œâ”€â”€ test_session_restore_after_restart
â”‚   â”œâ”€â”€ test_summary_generation_in_graph
â”‚   â””â”€â”€ test_full_conversation_flow_with_persistence
â””â”€â”€ ì‹¤ì œ APIë¡œ End-to-End í…ŒìŠ¤íŠ¸

[Step 9] ë ˆê±°ì‹œ ì •ë¦¬
â”œâ”€â”€ service/summary_service.py ì‚­ì œ
â”œâ”€â”€ repository/conversation_repo.py ì‚­ì œ ë˜ëŠ” ì¶•ì†Œ
â”œâ”€â”€ repository/session_repo.py ì‚­ì œ ë˜ëŠ” ì¶•ì†Œ
â”œâ”€â”€ prompt/agent.txt ì‚­ì œ
â””â”€â”€ ë¶ˆí•„ìš”í•œ import ì •ë¦¬

[Step 10] ë¬¸ì„œ ì—…ë°ì´íŠ¸
â””â”€â”€ doc/phase_02/_05.md ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ í‘œì‹œ
```

### 7.3 ë³€ê²½ ì „í›„ ë¹„êµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ë³€ê²½ ì „ (Phase 02-4)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

app.py
â”œâ”€â”€ SummaryService.should_summarize()     â† ìš”ì•½ íŒë‹¨
â”œâ”€â”€ SummaryService.get_turns_to_summarize()
â”œâ”€â”€ LLMService.generate()                 â† ìš”ì•½ ìƒì„±
â”œâ”€â”€ st.session_state.summary ì—…ë°ì´íŠ¸
â””â”€â”€ ReactGraphBuilder.invoke()            â† ê·¸ë˜í”„ ì‹¤í–‰

service/react_graph.py
â””â”€â”€ MemorySaver                           â† íœ˜ë°œì„± ì €ì¥

ì €ì¥ì†Œ:
â”œâ”€â”€ ConversationRepository (JSON)
â”œâ”€â”€ SessionRepository (JSON)
â””â”€â”€ EmbeddingRepository (Pickle)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ë³€ê²½ í›„ (Phase 02-5)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

app.py
â””â”€â”€ ReactGraphBuilder.invoke()            â† ê·¸ë˜í”„ ì‹¤í–‰ë§Œ (ë‹¨ìˆœí™”!)

service/react_graph.py
â”œâ”€â”€ SqliteSaver                           â† ì˜êµ¬ ì €ì¥
â”œâ”€â”€ Summary Node                          â† ìš”ì•½ íŒë‹¨ + ìƒì„±
â””â”€â”€ í™•ì¥ëœ ChatState                      â† ëª¨ë“  ìƒíƒœ í†µí•©

ì €ì¥ì†Œ:
â”œâ”€â”€ data/langgraph.db (SQLite)           â† ëŒ€í™”/ìš”ì•½/ìƒíƒœ í†µí•©
â””â”€â”€ EmbeddingRepository (Pickle)         â† PDF ì„ë² ë”©ë§Œ
```

### 7.4 ì˜ˆìƒ ì‘ì—…ëŸ‰

| ë‹¨ê³„ | íŒŒì¼ | ì˜ˆìƒ ë¼ì¸ ìˆ˜ |
|------|------|-------------|
| Step 1 | pyproject.toml | +1 |
| Step 2 | prompt/summary/*.py | +40 |
| Step 2 | tests/test_prompts.py | +30 |
| Step 3-6 | service/react_graph.py | +80, -10 |
| Step 3-6 | tests/test_react_graph.py | +100 |
| Step 7 | app.py | -50 |
| Step 8 | tests/test_integration.py | +40 |
| Step 9 | ì‚­ì œ íŒŒì¼ | -300 (ì¶”ì •) |

**ì´ ë³€ê²½**: ì•½ +300, -360 ë¼ì¸ (ìˆœ -60 ë¼ì¸, ì½”ë“œ ê°„ì†Œí™”)

---

## 8. ì˜ˆìƒ íë¦„

### 8.1 Turn 4ì—ì„œì˜ ë™ì‘

```
ì‚¬ìš©ì: "ë‘˜ ë¹„êµí•´ì¤˜" (Turn 4)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Summary Node                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. turn_count = 4                                               â”‚
â”‚ 2. should_summarize(4) = True                                   â”‚
â”‚ 3. to_summarize = [Turn 1, 2, 3]                               â”‚
â”‚ 4. to_keep = [Turn 4]                                          â”‚
â”‚ 5. LLM ìš”ì•½: "ì‚¬ìš©ìê°€ íŒŒì´ì¬ê³¼ ìë°”ì— ëŒ€í•´ ì§ˆë¬¸í•¨"              â”‚
â”‚ 6. state ì—…ë°ì´íŠ¸:                                              â”‚
â”‚    - summary = "ì‚¬ìš©ìê°€ íŒŒì´ì¬ê³¼ ìë°”ì— ëŒ€í•´ ì§ˆë¬¸í•¨"            â”‚
â”‚    - summary_history.append({...})                              â”‚
â”‚    - messages_for_context = [SystemMessage(ìš”ì•½), Turn 4]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tool Selector                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì…ë ¥: messages_for_context (ìš”ì•½ + Turn 4)                      â”‚
â”‚ íŒë‹¨: "ë¹„êµ" í‚¤ì›Œë“œ â†’ reasoning í•„ìš”                            â”‚
â”‚ ì¶œë ¥: current_tool = "reasoning"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
        ...
```

### 8.2 ì„¸ì…˜ ë³µì› ì‹œ ë™ì‘

```
ì•± ì¬ì‹œì‘ í›„:
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SqliteSaver.get(thread_id="session_123")                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DBì—ì„œ ì´ì „ ìƒíƒœ ë³µì›:                                          â”‚
â”‚ - messages: [Turn 1, 2, 3, 4, ...]                             â”‚
â”‚ - summary: "ì´ì „ ëŒ€í™” ìš”ì•½..."                                  â”‚
â”‚ - summary_history: [{...}, {...}]                               â”‚
â”‚ - tool_results: {...}                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
ì‚¬ìš©ì: "ì´ì–´ì„œ ì„¤ëª…í•´ì¤˜" (Turn 5)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Summary Node                                                    â”‚
â”‚ - ì´ì „ ì»¨í…ìŠ¤íŠ¸ ë³´ì¡´ë¨                                          â”‚
â”‚ - turn_count = 5, ìš”ì•½ ë¶ˆí•„ìš”                                   â”‚
â”‚ - messages_for_context = [ìš”ì•½ + Turn 4, 5]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
ì •ìƒì ìœ¼ë¡œ ì´ì „ ëŒ€í™” ì´ì–´ì„œ ì‘ë‹µ
```

---

## 9. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Step 1: ì˜ì¡´ì„±
- [x] `pyproject.toml` - langgraph-checkpoint-sqlite ì¶”ê°€
- [x] `uv sync` ì‹¤í–‰ í™•ì¸

### Step 2: ìš”ì•½ í”„ë¡¬í”„íŠ¸
- [x] `tests/test_prompts.py` - ìš”ì•½ í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (RED)
- [x] `prompt/summary/__init__.py` ìƒì„±
- [x] `prompt/summary/summary_generator.py` êµ¬í˜„ (GREEN)

### Step 3: ChatState í™•ì¥
- [x] `tests/test_react_graph.py` - ChatState í…ŒìŠ¤íŠ¸ ì¶”ê°€ (RED)
- [x] `service/react_graph.py` - ChatStateì— summary í•„ë“œ ì¶”ê°€ (GREEN)

### Step 4: SqliteSaver ì ìš©
- [x] `tests/test_react_graph.py` - SqliteSaver í…ŒìŠ¤íŠ¸ ì¶”ê°€ (RED)
- [x] `service/react_graph.py` - MemorySaver â†’ SqliteSaver (GREEN)

### Step 5: Summary Node êµ¬í˜„
- [x] `tests/test_react_graph.py` - Summary Node í…ŒìŠ¤íŠ¸ ì¶”ê°€ (RED)
- [x] `service/react_graph.py` - _summary_node() êµ¬í˜„ (GREEN)

### Step 6: ê·¸ë˜í”„ ì¬êµ¬ì„±
- [x] `tests/test_react_graph.py` - ê·¸ë˜í”„ íë¦„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (RED)
- [x] `service/react_graph.py` - build() ìˆ˜ì • (GREEN)

### Step 7: app.py ë‹¨ìˆœí™”
- [x] `app.py` - SummaryService í˜¸ì¶œ ì œê±°
- [ ] `app.py` - save_current_session() ë‹¨ìˆœí™” (ì„ íƒ: ê¸°ì¡´ repository ìœ ì§€)
- [ ] `app.py` - load_session_data() ë‹¨ìˆœí™” (ì„ íƒ: ê¸°ì¡´ repository ìœ ì§€)

### Step 8: í†µí•© í…ŒìŠ¤íŠ¸
- [ ] `tests/test_integration.py` - ì„¸ì…˜ ë³µì› í…ŒìŠ¤íŠ¸ ì¶”ê°€ (ì„ íƒ)
- [ ] `tests/test_integration.py` - ìš”ì•½ ìƒì„± í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€ (ì„ íƒ)
- [x] ì‹¤ì œ APIë¡œ End-to-End í…ŒìŠ¤íŠ¸ í†µê³¼ (14/14)

### Step 9: ë ˆê±°ì‹œ ì •ë¦¬
- [x] `service/summary_service.py` ì‚­ì œ
- [x] `service/chat_graph.py` ì‚­ì œ (Phase 02-2 ë ˆê±°ì‹œ)
- [x] `service/react_chat_graph.py` ì‚­ì œ (Phase 02-3 ë ˆê±°ì‹œ)
- [x] `tests/test_chat_graph.py` ì‚­ì œ (ë ˆê±°ì‹œ í…ŒìŠ¤íŠ¸)
- [x] `prompt/system/agent.txt` ì‚­ì œ (.pyë¡œ ëŒ€ì²´ë¨)
- [x] `service/__init__.py` - SummaryService import ì œê±°
- [x] `tests/test_service.py` - SummaryService í…ŒìŠ¤íŠ¸ ì œê±°
- [x] `tests/test_integration.py` - ë ˆê±°ì‹œ ReActChatGraphBuilder í…ŒìŠ¤íŠ¸ ì œê±°
- [x] `component/prompts_tab.py` - ìƒˆ í”„ë¡¬í”„íŠ¸ êµ¬ì¡°ë¡œ ì—…ë°ì´íŠ¸
- [x] `tests/test_component.py`, `tests/test_prompts_tab.py` - í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

### Step 10: ì™„ë£Œ
- [x] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸ (189 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
- [x] ë¬¸ì„œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ í‘œì‹œ

> **Phase 02-5 ì™„ë£Œ (2026-02-04)**
> - SqliteSaver ì ìš© ì™„ë£Œ
> - Summary Node ê·¸ë˜í”„ ë‚´ë¶€ í†µí•© ì™„ë£Œ
> - app.pyì—ì„œ SummaryService ì œê±° ì™„ë£Œ
> - ë ˆê±°ì‹œ íŒŒì¼ ì •ë¦¬ ì™„ë£Œ
> - ê·¸ë˜í”„ êµ¬ì¡°: START â†’ Summary Node â†’ Tool Selector â†’ Tools â†’ Result Processor â†’ Response Generator

---

## 10. ì˜ì¡´ì„± ì¶”ê°€

```toml
# pyproject.toml
[project]
dependencies = [
    ...
    "langgraph-checkpoint-sqlite",  # SqliteSaver ì‚¬ìš© ì‹œ í•„ìš”
]
```

ë˜ëŠ” langgraphì— ì´ë¯¸ í¬í•¨ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŒ (ë²„ì „ í™•ì¸ í•„ìš”).
